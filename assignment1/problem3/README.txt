COMPILATION:
Use the following command to compile the source file:
gcc p3.c -o p3

RUNNING:
You can use whichever command you want. Here are some example commands to test the code:
./p3 top
./p3 ls
./p3 pwd
./p3 ps

NOTE:
Since the './p3 history' command did not give any output related to the history of the terminal, I showed the sample runs with other commands such as 'ls', 'pwd' and 'ps'.

